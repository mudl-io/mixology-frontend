var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,n=(e,t)=>{for(var a in t||(t={}))i.call(t,a)&&r(e,a,t[a]);if(s)for(var a of s(t))o.call(t,a)&&r(e,a,t[a]);return e},c=(e,s)=>t(e,a(s)),l=(e,t,a)=>(r(e,"symbol"!=typeof t?t+"":t,a),a);import{c as d,a as h,b as p,j as u,I as m,d as g,e as k,R as v,M as C,f,B as S,_ as y,L as w,C as N,S as b,D as x,l as I,T as P,g as q,h as L,i as M,A as U,k as O,m as _,n as E,o as B,p as T,F as D,q as A,r as V,s as $,t as F,u as z,v as j,w as R,x as J,y as W,z as G,E as Y,G as H,H as Z,J as K,K as Q,P as X}from"./vendor.f2fed73d.js";var ee=d();const te=h({name:"ingredients",initialState:[],reducers:{didGetIngredients(e,t){e.push(...t.payload)},didCreateIngredient:(e,t)=>[...e,t.payload]}}),{didGetIngredients:ae,didCreateIngredient:se}=te.actions;var ie=te.reducer;const oe=h({name:"liquors",initialState:[],reducers:{didGetLiquors:(e,t)=>[...t.payload],didCreateLiquor:(e,t)=>[...e,t.payload]}}),{didGetLiquors:re,didCreateLiquor:ne}=oe.actions;var ce=oe.reducer;const le=h({name:"savedCocktails",initialState:{savedCocktails:[],nextPage:1,canLoadMore:!1},reducers:{didGetSavedCocktails(e,t){e.savedCocktails=[...t.payload.cocktails],e.canLoadMore=t.payload.canLoadMore,e.nextPage=2},didUpdateSavedCocktails(e,t){e.savedCocktails=[...e.savedCocktails,...t.payload.cocktails],e.canLoadMore=t.payload.canLoadMore,e.nextPage=e.nextPage+1},didSaveCocktail(e,t){e.savedCocktails.push(t.payload)},didUnsaveCocktail(e,t){e.savedCocktails&&(e.savedCocktails=e.savedCocktails.filter((e=>e.publicId!==t.payload.publicId)))}}}),{didGetSavedCocktails:de,didUpdateSavedCocktails:he,didSaveCocktail:pe,didUnsaveCocktail:ue}=le.actions;var me=le.reducer;const ge=p.create({baseURL:"http://127.0.0.1:8000/api/",timeout:5e3,headers:{Authorization:"JWT "+localStorage.getItem("access_token"),"Content-Type":"application/json",accept:"application/json"}}),ke=p.create({baseURL:"http://127.0.0.1:8000/api/",timeout:5e3,headers:{Authorization:"JWT "+localStorage.getItem("access_token"),"Content-Type":"multipart/form-data",accept:"application/json"}});[ge,ke].forEach((e=>{e.interceptors.response.use((e=>e),(e=>{const t=e.config;if(401===e.response.status&&t.url.indexOf("/token/refresh/")>-1)return localStorage.removeItem("access_token"),localStorage.removeItem("refesh_token"),localStorage.removeItem("user"),Promise.reject(e);if(401===e.response.status&&"Unauthorized"===e.response.statusText){const e=localStorage.getItem("refresh_token");if(!e)return;return ge.post("/token/refresh/",{refresh:e}).then((e=>(localStorage.setItem("access_token",e.data.access),localStorage.setItem("refresh_token",e.data.refresh),ge.defaults.headers.Authorization="JWT "+e.data.access,t.headers.Authorization="JWT "+e.data.access,ge(t)))).catch((e=>{console.log(e)}))}return Promise.reject(e)}))}));var ve="/assets/defaultimg.a4164ff7.png";const Ce=e=>{return u("div",{onClick:e.handleClick,children:(t=e.isChecked,u(m.Provider,{value:{color:"red"},children:u("div",{children:u(t?g:k,{size:20})})}))});var t};var fe=v.memo((e=>u(C,{className:"confirmation-modal",open:e.open,onClose:e.handleClose,children:f("div",{className:"contents",children:[u("div",{className:"question-text",children:e.question}),f("div",{children:[u(S,{className:"cancel button",variant:"contained",onClick:e.handleClose,children:e.cancelText}),u(S,{className:`confirm button ${e.confirmClass}`,variant:"contained",onClick:e.handleConfirm,children:e.confirmText})]})]})})));class Se extends v.PureComponent{constructor(e){super(e),l(this,"showCocktailDetails",(()=>{if(this.props.name)return this.cocktailDetails(this.props.cocktail)})),l(this,"listIngredients",(()=>{if(this.props.ingredients&&this.props.liquors){const e=[...this.props.liquors,...this.props.ingredients];return u("ul",{className:"ingredients-list",children:e.map((e=>u("li",{children:f("span",{children:[e.name," - ",e.amount," ",e.unit]})},`${e.publicId}-${e.name}`)))})}})),l(this,"createdBy",(()=>{if(this.props.createdBy){const e=this.props.createdBy.username,t=y.get(this.props.createdBy,"activeProfilePicture.image");return f("span",{className:"complexity stat",children:["Created By:"," ",f(w,{to:`/user/${e}/created-cocktails/`,children:[t&&u("img",{classname:"created-by-profile-picture",src:t}),e]})]})}})),l(this,"getImage",(()=>this.props.image?this.props.image.image:ve)),l(this,"toggleConfirmDelete",(()=>{this.setState({showDeleteConfirmation:!this.state.showDeleteConfirmation})})),l(this,"cocktailDetails",(()=>f("div",{className:"cocktail-details",children:[f("div",{className:"img-and-stats",children:[u("img",{src:this.getImage()}),u("h2",{children:this.props.name}),u("span",{className:"heart-checkbox",children:u(Ce,{isChecked:this.props.isSaved,handleClick:this.props.toggleSaveCocktail,tabIndex:"0"})}),f("span",{className:"saved stat",children:["Times Saved: ",this.props.timesSaved]}),f("span",{className:"complexity stat",children:["Complexity: ",this.props.complexity,"/10"]}),this.createdBy()]}),this.props.userCanEdit&&f("div",{className:"edit-text",children:[u(w,{to:"edit/",children:"Edit"}),u("span",{className:"delete-text",onClick:this.toggleConfirmDelete,children:"Delete"})]}),f("div",{children:[u("h3",{className:"header",children:"Description"}),u("p",{className:"content",children:this.props.description})]}),f("div",{className:"ingredients-container",children:[u("h3",{className:"ingredients header",children:"Ingredients"}),this.listIngredients()]}),f("div",{children:[u("h3",{className:"header",children:"Instructions"}),u("p",{className:"content",children:this.props.instructions})]}),u(fe,{cancelText:"Cancel",confirmClass:"deletion",confirmText:"Delete",open:this.state.showDeleteConfirmation,question:"Are you sure you want to delete this cocktail?",handleConfirm:this.props.deleteCocktail,handleClose:this.toggleConfirmDelete})]}))),this.state={image:"",showDeleteConfirmation:!1}}render(){return u("div",{children:this.showCocktailDetails()})}}const ye=e=>{if(e.length>0)return e.map((e=>({value:e,label:y.startCase(e.name)})))};var we=v.memo((e=>(e=>e.canCreateNewOptions?u(N,{styles:{control:t=>c(n({},t),{color:"black",borderWidth:"1px",borderColor:e.error?"red":"hsl(0, 0%, 80%)"}),option:e=>c(n({},e),{color:"black"})},name:e.name,options:ye(e.options),value:e.selectedOptions,isMulti:!0,onChange:e.handleSelect(e.optionName)}):u(b,{styles:{control:t=>c(n({},t),{color:"black",borderWidth:"1px",borderColor:e.error?"red":"hsl(0, 0%, 80%)"}),option:e=>c(n({},e),{color:"black"})},name:e.name,options:ye(e.options),value:e.selectedOptions,isMulti:!0,onChange:e.handleSelect(e.optionName)}))(e)));const Ne=e=>{const t=e.map((e=>e.name));return u("p",{className:"ingredients",children:t.join(", ")})},be=e=>e.cocktail.image?e.cocktail.image.image:ve;var xe=v.memo((e=>f(w,{className:"cocktail-detail",to:`/cocktail/${e.cocktail.publicId}/`,target:"_blank",children:[u("img",{src:be(e)}),u("div",{className:"name",children:e.cocktail.name}),u("div",{className:"ingredients-list",children:Ne([...e.cocktail.liquors,...e.cocktail.ingredients])})]})));function Ie(e){return e&&0!==e.length?"object"!=typeof e?JSON.stringify([e]):JSON.stringify(e.map((e=>e.publicId))):[]}class Pe extends v.Component{constructor(e){super(e),l(this,"list",(e=>u("div",{className:"cocktails-list",children:e.map((e=>u(xe,{cocktail:e},e.publicId)))}))),this.state={additionalCocktails:[]}}async componentDidMount(){try{const e=await ge.get("cocktails/filtered_cocktails/",{params:{liquors_filter:Ie(this.props.liquors),ingredients_filter:Ie(this.props.ingredients)}});this.setState({additionalCocktails:e.data.results})}catch(e){console.log(e)}}render(){return u(x,{anchor:"right",open:!0,onClose:this.props.toggleShowMoreCocktails,children:this.list(this.state.additionalCocktails)})}}class qe extends v.Component{constructor(e){super(e),l(this,"getCocktail",(async()=>{try{const e=await ge.get("/cocktails/random_cocktail",{params:{liquors_filter:JSON.stringify(this.state.selectedLiquors.map((e=>e.publicId))),ingredients_filter:JSON.stringify(this.state.selectedIngredients.map((e=>e.publicId))),find_exact_match:this.state.shouldBeExact,hide_user_cocktails:this.state.hideUserCocktails}});if(204===e.status)I.NotificationManager.warning("Unfortunately, we were unable to find an exact match for you based on your filters. Try adjusting your filters or checking off the exact match button.","No Cocktail Found",5e3);else{const t=e.data,a=this.state.selectedIngredients.length>0||this.state.selectedLiquors.length>0;this.setState({cocktail:t,cocktailId:t.publicId,name:t.name,description:t.description,complexity:t.complexity,image:t.image,ingredients:t.ingredients,liquors:t.liquors,instructions:t.instructions,createdBy:t.createdBy,isSaved:t.isSaved,timesSaved:t.timesSaved,canShowMoreCocktails:a,error:""}),ge.post(`cocktails/${t.publicId}/viewed_cocktail/`)}}catch(e){this.setState({error:"Error retrieving cocktails"})}})),l(this,"toggleSaveCocktail",(async()=>{if(this.props.isSignedIn)try{await ge.post(`/cocktails/${this.state.cocktailId}/save_cocktail/`);const e=this.state.isSaved?-1:1,t=this.state.isSaved?ue:pe;this.setState({isSaved:!this.state.isSaved,timesSaved:this.state.timesSaved+e}),this.props.dispatch(t(this.state.cocktail))}catch(e){console.log(e)}else I.NotificationManager.warning("Please login or create an account in order to save cocktails!","Cannot Save",3e3)})),l(this,"showCocktailDetails",(()=>{let e;return e=this.state.error?u("div",{children:this.state.error}):u(Se,{name:this.state.name,description:this.state.description,amtSaved:this.state.amtSaved,complexity:this.state.complexity,image:this.state.image,ingredients:this.state.ingredients,liquors:this.state.liquors,instructions:this.state.instructions,createdBy:this.state.createdBy,isSaved:this.state.isSaved,timesSaved:this.state.timesSaved,toggleSaveCocktail:this.toggleSaveCocktail}),e})),l(this,"showMoreCocktailsOption",(()=>{if(this.state.canShowMoreCocktails)return u("div",{className:"show-more-cocktails-text",onClick:this.toggleShowMoreCocktails,children:"Show more cocktails with these ingredients"})})),l(this,"moreCocktailsSidenav",(()=>{if(this.state.showMoreCocktails)return u(Pe,{ingredients:this.state.selectedIngredients,liquors:this.state.selectedLiquors,toggleShowMoreCocktails:this.toggleShowMoreCocktails})})),l(this,"handleSelect",(e=>t=>{const a=t.map((e=>e.value));this.setState({[e]:a})})),l(this,"toggleExactMatch",(()=>{this.setState({shouldBeExact:!this.state.shouldBeExact})})),l(this,"toggleShowUserCocktails",(()=>{this.setState({hideUserCocktails:!this.state.hideUserCocktails})})),l(this,"toggleShowMoreCocktails",(()=>{this.setState({showMoreCocktails:!this.state.showMoreCocktails})})),this.state={name:"",description:"",complexity:0,image:"",error:"",selectedIngredients:[],selectedLiquors:[],shouldBeExact:!1,hideUserCocktails:!1,createdBy:null,isSaved:!1,timesSaved:0,canShowMoreCocktails:!1,showMoreCocktails:!1}}async componentDidMount(){try{if(0===this.props.ingredientOptions.length||0===this.props.liquorOptions.length){const[e,t]=await Promise.all([ge.get("/ingredients/"),ge.get("/liquors/")]);this.props.dispatch(ae(e.data)),this.props.dispatch(re(t.data))}}catch(e){console.log(e)}}render(){return f("div",{className:"homepage-container",children:[f("div",{className:"cocktail-display",children:[this.showCocktailDetails(),f("div",{className:this.state.name.length>0?"cocktail-options active":"cocktail-options inactive",children:[this.showMoreCocktailsOption(),u(S,{variant:"contained",className:"cocktail-button",onClick:this.getCocktail,children:"Find a random cocktail"}),f("div",{className:"filters",children:[f("div",{className:"filter-dropdown liquors-filter",children:[u("div",{className:"input-name",children:"Filter By Liquor:"}),u(we,{canCreateNewOptions:!1,name:"Liquors",options:this.props.liquorOptions,optionName:"selectedLiquors",handleSelect:this.handleSelect})]}),f("div",{className:"filter-dropdown ingredients-filter",children:[u("div",{className:"input-name",children:"Filter By Ingredient:"}),u(we,{canCreateNewOptions:!1,name:"Ingredients",options:this.props.ingredientOptions,optionName:"selectedIngredients",handleSelect:this.handleSelect})]}),u("div",{className:"exact-match checkbox",children:u(P,{placement:"top",title:"Check this box if you want to find a cocktail with exactly your selected ingredients, no more, no less!",children:f("div",{children:[u(q,{checked:this.state.shouldBeExact,onChange:this.toggleExactMatch}),u("span",{className:"checkbox-text",children:"Find Exact Match"})]})})}),f("div",{className:"user-created checkbox",children:[u(q,{checked:this.state.showUserCocktails,onChange:this.toggleShowUserCocktails}),u("span",{className:"checkbox-text",children:"Hide User Created Cocktails"})]})]})]})]}),this.moreCocktailsSidenav()]})}}var Le=L((e=>{const{liquors:t,ingredients:a}=e;return{liquorOptions:t,ingredientOptions:a}}))(qe);const Me=h({name:"users",initialState:{user:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null},reducers:{loginUser(e,t){e.user=t.payload,localStorage.setItem("user",JSON.stringify(t.payload))},logoutUser(e,t){e.user=null,localStorage.removeItem("user")}}}),{loginUser:Ue,logoutUser:Oe}=Me.actions;var _e=Me.reducer;class Ee extends v.Component{constructor(e){super(e),l(this,"handleChange",(e=>{this.setState({[e.target.name]:e.target.value})})),l(this,"handleSubmit",(async e=>{let t;e.preventDefault();try{if(t=await ge.post("/token/obtain/",{username:this.state.username,password:this.state.password}),!t)return void I.NotificationManager.error("There was an error logging you in. Please make sure your username and password are correct.","Login Error",3e3);ge.defaults.headers.Authorization="JWT "+t.data.access,localStorage.setItem("access_token",t.data.access),localStorage.setItem("refresh_token",t.data.refresh);const e={id:t.data.id,username:t.data.user,email:t.data.email};return this.props.dispatch(Ue(e)),t}catch(a){throw a}})),l(this,"redirectToForgotPassword",(()=>{ee.push("/reset-password/")})),this.state={username:"",password:""}}render(){return f("div",{className:"login-form-container",children:[u("h1",{children:"Login"}),f("form",{className:"login-form",onSubmit:this.handleSubmit,children:[u("div",{children:u(M,{required:!0,label:"Username",name:"username",value:this.state.username,variant:"outlined",onChange:this.handleChange})}),u("div",{children:u(M,{required:!0,label:"Password",name:"password",type:"password",value:this.state.password,variant:"outlined",onChange:this.handleChange})}),u("div",{className:"forgot-password-text",onClick:this.redirectToForgotPassword,children:"Forgot Password?"}),u("input",{className:"signup-submit-button",type:"submit",value:"Submit"})]})]})}}var Be=L()(Ee);class Te extends v.Component{constructor(e){super(e),l(this,"validateInput",(()=>{if(!this.state.hasAttemptedSubmit)return!0;const e=this.state.confirmPassword===this.state.password,t=this.state.password.trim().length>7;return e&&t})),this.state={username:"",password:"",confirmPassword:"",email:"",hasAttemptedSubmit:!1},this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}handleChange(e){this.setState({[e.target.name]:e.target.value})}async handleSubmit(e){e.preventDefault(),this.setState({hasAttemptedSubmit:!0});try{const e=await ge.post("/user/create/",{username:this.state.username,email:this.state.email,password:this.state.password});if(207===e.status)return void I.NotificationManager.error(e.data,"Signup Error",3e3);this.props.dispatch(Ue(e.data));const t=await ge.post("/token/obtain/",{username:this.state.username,password:this.state.password});return ge.defaults.headers.Authorization="JWT "+t.data.access,localStorage.setItem("access_token",t.data.access),localStorage.setItem("refresh_token",t.data.refresh),e}catch(t){console.log(t)}}render(){return f("div",{className:"signup-form-container",children:[u("h1",{children:"Signup"}),f("form",{className:"signup-form",onSubmit:this.handleSubmit,children:[u("label",{children:u(M,{required:!0,className:this.state.passwordError?"invalid":"",label:"Username",name:"username",variant:"outlined",onChange:this.handleChange})}),u("label",{children:u(M,{required:!0,className:this.state.passwordError?"invalid":"",label:"Email",name:"email",variant:"outlined",onChange:this.handleChange})}),u("label",{children:u(M,{required:!0,className:this.state.passwordError?"invalid":"",error:!this.validateInput(),helperText:"Please make sure your password is at least 8 characters long.",label:"Password",name:"password",type:"password",variant:"outlined",onChange:this.handleChange})}),u("label",{children:u(M,{required:!0,className:this.state.confirmPasswordError?"invalid":"",error:!this.validateInput(),label:"Confirm Password",name:"confirmPassword",type:"password",variant:"outlined",onChange:this.handleChange})}),u("input",{className:"signup-submit-button",type:"submit",value:"Submit"})]})]})}}var De=L()(Te);class Ae extends v.Component{constructor(e){super(e)}async componentDidMount(){if(0===this.props.liquors.length)try{const e=await ge.get("/liquors/");this.props.dispatch(re(e.data))}catch(e){console.log(e)}}render(){const e=y.sortBy(y.filter(this.props.liquors,(e=>!e.createdBy)),["name"]);return u(x,{anchor:"left",variant:"persistent",open:this.props.open,children:f("div",{className:"liquor-links",children:[u("h3",{className:"title",children:"Find cocktails by liquor"}),u("div",{children:e.map((e=>u("div",{children:u(w,{className:"liquor-type",to:`/cocktails/${e.publicId}`,children:e.name})},e.publicId)))})]})})}}var Ve=L((e=>{const{liquors:t}=e;return{liquors:t}}))(Ae);const $e=e=>u("div",{className:"search-bar",children:u(U,{cacheOptions:!0,placeholder:e.placeholder||"Search...",loadOptions:e.loadOptions,onInputChange:e.handleChange,onChange:e.handleSelect})});class Fe extends v.Component{constructor(e){super(e),l(this,"logout",(async()=>{let e;try{e=await ge.post("/blacklist/",{refresh_token:localStorage.getItem("refresh_token")}),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),ge.defaults.headers.Authorization=null,this.props.dispatch(Oe()),window.location.href="/login/"}catch(t){console.log(t)}finally{return e}})),l(this,"leftNavContent",(()=>{let e;return this.props.user&&(e=u("span",{className:"cocktail-options-buttons",children:u(w,{className:"nav-link",to:"/create-cocktail/",children:"Create a Cocktail"})})),e})),l(this,"rightNavContent",(()=>{let e;return e=this.props.user?f(O,{className:"user-options-dropdown",variant:"Secondary",title:this.props.user.username,children:[u(_.Item,{as:w,to:`/user/${this.props.user.username}`,children:"Profile"}),u(_.Item,{as:w,to:`/user/${this.props.user.username}/saved-cocktails`,children:"Saved Cocktails"}),u(_.Item,{as:w,to:`/user/${this.props.user.username}/created-cocktails`,children:"Created Cocktails"}),u(_.Divider,{}),u(_.Item,{onClick:this.logout,children:"Logout"})]}):f("span",{className:"login-signup-buttons",children:[u(w,{className:"nav-link",to:"/login/",children:"Login"}),u(w,{className:"nav-link",to:"/signup/",children:"Sign Up"})]}),e})),l(this,"handleClickOutside",(e=>{"liquor-type"===e.target.className&&setTimeout((()=>{this.setState({drawerOpen:!1})}),100)})),l(this,"handleDrawerOpen",(()=>{this.setState({drawerOpen:!this.state.drawerOpen})})),l(this,"handleSearchBarChange",(e=>e.trim())),l(this,"handleSearchSelect",(e=>{const t=y.get(e,"value.publicId");t&&ee.push(`/cocktail/${t}/`)})),l(this,"callSearch",(e=>(clearTimeout(this.state.pauseSearchTimer),this.setState({pauseSearchTimer:setTimeout((()=>{this.getSearchResults(e)}),300)}),new Promise((e=>{setTimeout((()=>{e(this.state.searchResults)}),400)}))))),l(this,"getSearchResults",(async e=>{if(!(e.length<3))try{const t=await ge.get("/cocktails/",{params:{action:"search",search_value:e}}),a=(y.get(t,"data.results")||[]).map((e=>({value:e,label:e.name})));this.setState({searchResults:a})}catch(t){console.log(t)}})),l(this,"drawerStateIcon",(()=>this.state.drawerOpen?u(E,{}):u(B,{}))),this.state={drawerOpen:!1,pauseSearchTimer:null,searchResults:[]}}componentDidMount(){document.addEventListener("mousedown",this.handleClickOutside)}render(){return f("div",{children:[f("div",{className:"primary-navigation-bar",children:[u(T,{color:"inherit","aria-label":"open drawer",onClick:this.handleDrawerOpen,edge:"start",children:this.drawerStateIcon()}),f("nav",{className:"left-nav",children:[f(w,{className:"nav-link homepage",to:"/",children:[u("img",{className:"site-logo-nav",src:"/defaultimg.png"}),u("span",{className:"logo-text",children:"Cocktail"})]}),this.leftNavContent()]}),u($e,{placeholder:"Search for a cocktail",loadOptions:this.callSearch,onInputChange:this.handleSearchBarChange,handleSelect:this.handleSearchSelect}),u("nav",{className:"right-nav",children:this.rightNavContent()})]}),u("div",{children:u(Ve,{open:this.state.drawerOpen})})]})}}var ze=L()(Fe);const je=e=>u(P,{title:e.title,placement:e.placement,children:u("span",{className:"help-icon",children:u(D,{})})});const Re=(e,t)=>u(M,{className:"outlined-select-currency-native",select:!0,label:"Unit",value:e.unit,onChange:t.updateProperty(e.publicId,"unit"),SelectProps:{native:!0},variant:"outlined",children:[{value:"oz",label:"oz"},{value:"dash(es)",label:"dash(es)"},{value:"cup(s)",label:"cup(s)"}].map((e=>u("option",{value:e.value,children:e.value},e.label)))}),Je=e=>u("div",{className:"amounts-input-list",children:e.items.map((t=>f("div",{className:"amount-input-item",children:[f("span",{className:"item-name",children:[t.name,": "]}),u(M,{className:"item-input",label:"Amount",type:"number",value:t.amount,onChange:e.updateProperty(t.publicId,"amount"),InputLabelProps:{shrink:!0},InputProps:{inputProps:{min:e.min,max:e.max,step:"any"}},variant:"outlined"}),Re(t,e)]},t.publicId)))});class We extends v.Component{constructor(e){super(e),l(this,"handleChange",(e=>{const t=0===e.target.value.trim().length,a=e.target.name+"Valid";this.setState({[e.target.name]:e.target.value,[a]:!t})})),l(this,"handleSelect",(e=>async(t,a)=>{if("create-option"===a.action){const a=y.find(t,{__isNew__:!0}),s=await this.createNewOption(e,a.label),i=t.findIndex((e=>1==e.__isNew__));t[i].value=s,t[i].__isNew__=!1}const s=t.map((t=>{let a=t.value;const s=y.find(this.state[e],(e=>e.publicId===a.publicId));return a=s?n({},s):c(n({},a),{amount:0,unit:"oz"}),a})),i=e+"AreValid",o=s.length>0;this.setState({[e]:s,[i]:o})})),l(this,"createNewOption",(async(e,t)=>{const a="selectedLiquors"===e?"liquors":"ingredients";try{const e=(await ge.post(`/${a}/`,{name:t})).data;return"liquors"===a?this.props.dispatch(ne(e)):this.props.dispatch(se(e)),I.NotificationManager.success("Successfully created your ingredient!","Creation Success",2e3),e}catch(s){I.NotificationManager.error("There was an error creating your ingredient. Please try again or refresh the page.","Creation Error",2e3)}})),l(this,"handleSelectComplexity",(e=>{const t={control:e=>c(n({},e),{borderWidth:"1px",borderColor:"hsl(0, 0%, 80%)"})};this.setState({complexity:e.value,complexityClass:t})})),l(this,"updateProperty",((e,t)=>a=>{const s=y.find(this.state.selectedIngredients,(t=>t.publicId===e)),i=y.find(this.state.selectedLiquors,(t=>t.publicId===e)),o=s||i,r=s?"selectedIngredients":"selectedLiquors";this.setState((e=>({[r]:e[r].map((e=>{if(e.publicId===o.publicId){return c(n({},o),{[t]:a.target.value})}return e}))})))})),l(this,"toggleIsPrivate",(()=>{this.setState({isPrivate:!this.state.isPrivate})})),l(this,"createCocktail",(e=>ge.post("/cocktails/",e))),l(this,"updateCocktail",(e=>ge.put(`/cocktails/${this.state.cocktailId}/`,e))),l(this,"handleSubmit",(async e=>{e.preventDefault();{let e;try{const t={name:this.state.cocktailName,description:this.state.description,complexity:this.state.complexity,instructions:this.state.instructions,liquors:this.state.selectedLiquors,ingredients:this.state.selectedIngredients,isPrivate:this.state.isPrivate};e=this.state.isEditedCocktail?await this.updateCocktail(t):await this.createCocktail(t),this.state.cocktailImg&&this.uploadCocktailImage(e.data),I.NotificationManager.success('Your cocktail was successfully created! You can now view this in the "Created Cocktails" section in your profile.',"Cocktail Submitted",2e3),setTimeout((()=>{this.setState({submittedForm:!0})}),2e3)}catch(t){throw I.NotificationManager.error("There was an error creating your cocktail, please try resubmitting or refreshing the page.","Creation Error",2e3),t}finally{return e}}})),l(this,"complexityOptions",(()=>[...Array(10).keys()].map((e=>({value:1+e,label:1+e}))))),l(this,"validateForm",(()=>{const e=this.state.cocktailName.trim().length>0,t=this.state.selectedIngredients.length>0,a=this.state.selectedLiquors.length>0,s=this.state.instructions.trim().length>0,i=this.state.complexity>0,o=e&&t&&a&&i&&s;if(!o){const t={control:e=>c(n({},e),{borderWidth:this.state.complexity>0?"1px":"2px",borderColor:this.state.complexity>0?"hsl(0, 0%, 80%)":"red"})};this.setState({cocktailNameValid:e,instructionsValid:s,selectedIngredientsAreValid:this.state.selectedIngredients.length>0,selectedLiquorsAreValid:this.state.selectedLiquors.length>0,complexityClass:t})}return o})),l(this,"shouldRedirect",(()=>{if(this.state.submittedForm)return this.state.isEditedCocktail?u(A,{to:{pathname:`/cocktail/${this.state.cocktailId}/`}}):u(A,{to:{pathname:"/"}})})),l(this,"onUploadImage",(e=>{this.setState({cocktailImg:e[0]})})),l(this,"uploadCocktailImage",(async e=>{const t=new FormData;t.append("image",this.state.cocktailImg),t.append("name",this.state.cocktailImg.name),t.append("cocktail_id",e.publicId);try{let a;if(this.state.isEditedCocktail&&e.image){const s=e.image.publicId;a=await ke.put(`/cocktail_images/${s}/`,t)}else a=await ke.post("/cocktail_images/",t);return a}catch(a){console.log(a)}})),l(this,"setEditingState",(e=>{this.setState({cocktailId:e.publicId,cocktailName:e.name,complexity:e.complexity,description:e.description,instructions:e.instructions,isEditedCocktail:!0,isPrivate:e.isPrivate,selectedIngredients:e.ingredients,selectedLiquors:e.liquors,submitButtonText:"Update Cocktail"})})),this.state={cocktailName:"",cocktailImg:null,description:"",complexity:0,instructions:"",selectedIngredients:[],selectedLiquors:[],isEditedCocktail:!1,isPrivate:!1,cocktailNameValid:!0,selectedLiquorsAreValid:!0,selectedIngredientsAreValid:!0,complexityClass:{},instructionsValid:!0,submitButtonText:"Create Cocktail",submittedForm:!1,errorMessageActive:!1}}async componentDidMount(){if(this.props.location.pathname.indexOf("edit")>-1){const e=this.props.match.params.id,t=(await ge.get(`/cocktails/${e}`)).data;this.setEditingState(t)}try{if(0===this.props.ingredientOptions.length||0===this.props.liquorOptions.length){const[e,t]=await Promise.all([ge.get("/ingredients/"),ge.get("/liquors/")]);this.props.dispatch(ae(e.data)),this.props.dispatch(re(t.data))}}catch(e){console.log(e)}}componentDidUpdate(e){this.props.location.pathname.indexOf("edit")<0&&e.location.pathname.indexOf("edit")>-1&&this.setState({cocktailName:"",cocktailImg:null,description:"",complexity:0,instructions:"",selectedIngredients:[],selectedLiquors:[],isEditedCocktail:!1,isPrivate:!1,cocktailNameValid:!0,selectedLiquorsAreValid:!0,selectedIngredientsAreValid:!0,complexityClass:{},instructionsValid:!0,submitButtonText:"Create Cocktail",submittedForm:!1,errorMessageActive:!1})}render(){return f("div",{className:"create-cocktail-container",children:[f("form",{className:"create-cocktail-form",onSubmit:this.handleSubmit,children:[f("label",{className:"cocktail-name-input",children:[u("div",{className:"input-name",children:"Name*:"}),u("input",{name:"cocktailName",className:this.state.cocktailNameValid?"":"invalid",type:"text",value:this.state.cocktailName,onChange:this.handleChange})]}),f("label",{className:"dropdown-select",children:[u("div",{className:"input-name",children:"Liquors*:"}),u(we,{canCreateNewOptions:!0,name:"Liquors",options:this.props.liquorOptions,optionName:"selectedLiquors",error:!this.state.selectedLiquorsAreValid,selectedOptions:this.state.selectedLiquors.map((e=>({value:e,label:e.name}))),handleSelect:this.handleSelect})]}),u("div",{className:"liquor-amounts",children:u(Je,{items:this.state.selectedLiquors,min:0,max:10,updateProperty:this.updateProperty})}),f("label",{className:"dropdown-select",children:[u("div",{className:"input-name",children:"Ingredients*:"}),u(we,{canCreateNewOptions:!0,name:"Ingredients",options:this.props.ingredientOptions,optionName:"selectedIngredients",error:!this.state.selectedIngredientsAreValid,selectedOptions:this.state.selectedIngredients.map((e=>({value:e,label:e.name}))),handleSelect:this.handleSelect})]}),u("div",{className:"ingredient-amounts",children:u(Je,{items:this.state.selectedIngredients,min:0,max:10,updateProperty:this.updateProperty})}),f("label",{className:"input-text-area",children:[u("div",{className:"input-name",children:"Instructions*:"}),u("textarea",{name:"instructions",className:this.state.instructionsValid?"":"invalid",type:"textarea",value:this.state.instructions,onChange:this.handleChange})]}),f("label",{className:"input-text-area",children:[u("div",{className:"input-name",children:"Description:"}),u("textarea",{name:"description",type:"textarea",value:this.state.description,onChange:this.handleChange})]}),f("label",{className:"dropdown-select complexity",children:[u("div",{className:"input-name",children:"Complexity*:"}),u(b,{styles:this.state.complexityClass,name:"Complexity",options:this.complexityOptions(),value:{value:this.state.complexity,label:this.state.complexity},onChange:this.handleSelectComplexity}),u(je,{title:"A measure of how hard this drink is to make!",placement:"top"})]}),u(V,{buttonText:"Upload Cocktail Image",onChange:this.onUploadImage,imgExtension:[".jpg",".gif",".png",".gif"],maxFileSize:9999999,singleImage:!0,withIcon:!0,withPreview:!0}),f("div",{className:"private-cocktail-checkbox",children:[u(q,{checked:this.state.isPrivate,onChange:this.toggleIsPrivate}),u("span",{className:"checkbox-text",children:"Make private"})]}),u("input",{className:"create-cocktail-submit-button",type:"submit",value:this.state.submitButtonText})]}),this.shouldRedirect()]})}}var Ge=L((e=>{const{liquors:t,ingredients:a}=e;return{liquorOptions:y.sortBy(y.uniqBy(t,"name"),"name"),ingredientOptions:y.sortBy(y.uniqBy(a,"name"),"name")}}))(We);var Ye=v.memo((e=>{return f("div",{className:"cocktails-list-container",children:[u("h1",{children:e.title}),(t=>{if(t)return f($,{indicatorColor:"primary",value:e.isToggled?1:0,onChange:e.handleToggle,children:[u(F,{label:"Platform Cocktails"}),u(F,{label:"User Created Cocktails"})]})})(e.hasToggle),(t=e.cocktails,u("div",{className:"cocktails-list",children:t.map((e=>u(xe,{cocktail:e},e.publicId)))}))]});var t}));const He=e=>{const t=z.exports.useRef(null),a=z.exports.useCallback((t=>{t[0].isIntersecting&&e.canLoadMore&&!e.isLoading&&e.fetchData()}),[e.canLoadMore,e.isLoading,e.fetchData]);z.exports.useEffect((()=>{const e=new IntersectionObserver(a,{root:null,rootMargin:"0px",threshold:.25});return t&&t.current&&e.observe(t.current),()=>{t.current&&e.unobserve(t.current)}}),[t,a]);return f("div",{children:[e.children,(s=e.canLoadMore,u("div",{ref:t,className:"end-scroll",children:s&&u(j,{})}))]});var s};class Ze extends v.Component{constructor(e){super(e),l(this,"fetchSavedCocktails",(async()=>{const e=this.props.nextPage;try{this.setState({isLoading:!0});const t=await ge.get("/cocktails/",{params:{action:"saved_cocktails",username:this.props.match.params.username,page:e}}),a=t.data.results,s=!!t.data.next,i=1===e?de:he;this.props.dispatch(i({cocktails:a,canLoadMore:s}))}catch(t){}finally{this.setState({isLoading:!1})}})),this.state={isLoading:!1}}componentDidMount(){this.fetchSavedCocktails()}render(){return u("div",{className:"saved-cocktail-display",children:u(He,{canLoadMore:this.props.canLoadMore,isLoading:this.state.isLoading,fetchData:this.fetchSavedCocktails,children:u(Ye,{title:"Saved Cocktails",cocktails:this.props.savedCocktails})})})}}var Ke=L((e=>{const t=e.savedCocktails,{savedCocktails:a,nextPage:s,canLoadMore:i}=t;return{savedCocktails:a,canLoadMore:i,nextPage:s}}))(Ze);const Qe=h({name:"createdCocktails",initialState:{createdCocktails:[],canLoadMore:!1,nextPage:1},reducers:{didGetCreatedCocktails(e,t){const a=t.payload.user;e[a]=e[a]?e[a]:{},e[a].createdCocktails=[...t.payload.cocktails],e[a].canLoadMore=t.payload.canLoadMore,e[a].nextPage=2},didUpdateCreatedCocktails(e,t){const a=t.payload.user;e[a].createdCocktails=[...e[a].createdCocktails,...t.payload.cocktails],e[a].canLoadMore=t.payload.canLoadMore,e[a].nextPage=e[a].nextPage+1}}}),{didGetCreatedCocktails:Xe,didUpdateCreatedCocktails:et}=Qe.actions;var tt=Qe.reducer;class at extends v.Component{constructor(e){super(e),l(this,"fetchCreatedCocktails",(async()=>{const e=this.props.nextPage;try{this.setState({isLoading:!0});const t=await ge.get("/cocktails/",{params:{action:"created_cocktails",username:this.props.match.params.username,page:e}}),a=t.data.results,s=!!t.data.next,i=1===e?Xe:et;this.props.dispatch(i({user:this.props.match.params.username,cocktails:a,canLoadMore:s}))}catch(t){}finally{this.setState({isLoading:!1})}})),this.state={isLoading:!1}}componentDidMount(){this.fetchCreatedCocktails()}componentDidUpdate(e){this.props.match.params.username!==e.match.params.username&&this.fetchCreatedCocktails()}render(){return u("div",{className:"saved-cocktail-display",children:u(He,{canLoadMore:this.props.canLoadMore,isLoading:this.state.isLoading,fetchData:this.fetchCreatedCocktails,children:u(Ye,{title:"Created Cocktails",cocktails:this.props.createdCocktails})})})}}var st=L(((e,t)=>{const a=e.createdCocktails[t.match.params.username],{createdCocktails:s,canLoadMore:i,nextPage:o}=a||e.createdCocktails;return{createdCocktails:s,canLoadMore:i,nextPage:o}}))(at);class it extends v.Component{constructor(e){super(e),l(this,"getCocktail",(async()=>{const e=this.props.match.params.id;let t=this.props.savedCocktails.find((t=>t.publicId===e));t||(t=await ge.get(`/cocktails/${e}`),t=t.data),this.setState({cocktail:t,cocktailId:e,complexity:t.complexity,createdBy:t.createdBy,description:t.description,image:t.image,ingredients:t.ingredients,instructions:t.instructions,isSaved:t.isSaved,liquors:t.liquors,name:t.name,timesSaved:t.timesSaved,userCanEdit:t.createdBy&&t.createdBy.username===this.props.currentUser.username})})),l(this,"deleteCocktail",(async()=>{try{await ge.delete(`/cocktails/${this.state.cocktailId}/`),I.NotificationManager.success("Successfully deleted your cocktail","Deletion Success",2e3),this.props.history.push("/created-cocktails/")}catch(e){I.NotificationManager.success("Failed to delete your cocktail","Deletion Failure",2e3)}})),l(this,"toggleSaveCocktail",(async()=>{try{await ge.post(`/cocktails/${this.state.cocktailId}/save_cocktail/`);const e=this.state.isSaved?-1:1,t=this.state.isSaved?ue:pe;this.setState({isSaved:!this.state.isSaved,timesSaved:this.state.timesSaved+e}),this.props.dispatch(t(this.state.cocktail))}catch(e){console.log(e)}})),this.state={name:"",description:"",complexity:0,image:"",liquors:[],ingredients:[],createdBy:null,isSaved:!1,timesSaved:0}}componentDidMount(){this.getCocktail()}componentDidUpdate(e){e.match.params.id!==this.props.match.params.id&&this.getCocktail()}render(){return u("div",{className:"dynamic-cocktail-container",children:u(Se,{cocktailId:this.state.cocktailId,name:this.state.name,description:this.state.description,complexity:this.state.complexity,image:this.state.image,ingredients:this.state.ingredients,liquors:this.state.liquors,instructions:this.state.instructions,createdBy:this.state.createdBy,isSaved:this.state.isSaved,timesSaved:this.state.timesSaved,userCanEdit:this.state.userCanEdit,deleteCocktail:this.deleteCocktail,toggleSaveCocktail:this.toggleSaveCocktail})})}}var ot=L((e=>{const t=e.savedCocktails.savedCocktails,{user:a}=e.users;return{savedCocktails:t,currentUser:a}}))(it);var rt=v.memo((e=>{const[t,a]=z.exports.useState(!1);return u(C,{className:"image-upload-modal",open:e.open,onClose:e.handleClose,children:f("div",{className:"content",children:[u(V,{buttonText:e.buttonText,onChange:(s=e.uploadImage,e=>{a(!0),s(e)}),imageExtension:[".jpg",".png"],maxFileSize:9999999,singleImage:!0,withIcon:!0,withLabel:!1,withPreview:!0}),t&&u(S,{variant:"contained",className:"save-button",onClick:e.saveImage,children:"Save Picture"})]})});var s}));const nt=e=>{const[t,a]=z.exports.useState(!1),[s,i]=z.exports.useState("visible"),[o,r]=z.exports.useState(0),n=e.images,[c,l]=z.exports.useState(!1),[d,h]=z.exports.useState(n),p=z.exports.useCallback((()=>{a(!1),i("visible")}),[t]),m=e=>t=>{0===o&&-1===e||o===n.length-1&&1===e||(a(!0),i("hide"),l(o+e>0),h(o+e<n.length-1),r(o+e))};return u(C,{className:"clickable-images-modal",open:e.open,onClose:()=>{r(0),l(!1),h(n),e.handleClose()},children:f("div",{className:"content",children:[c&&u(R,{className:"arrow",fontSize:"large",onClick:m(-1)}),t&&u(j,{}),u("img",{className:s,src:n[o],onLoad:p}),d&&u(J,{className:"arrow",fontSize:"large",onClick:m(1)}),e.canUpdate&&u("div",{className:"set-active-text",onClick:e.handleUpdate(n[o]),children:e.updateText})]})})};class ct extends v.Component{constructor(e){super(e),l(this,"getProfileInfo",(async()=>{try{const[e,t]=await Promise.all([ge.get("/user/detail/",{params:{username:this.props.match.params.username}}),ge.get("/profile_pictures/")]),a=y.remove(t.data,(e=>e.isActive)),s=a.concat(t.data).map((e=>e.image));this.setState({activeProfilePicture:y.get(e,"data.activeProfilePicture.image"),createdCocktailsCount:e.data.createdCocktailsCount,email:e.data.email,profilePicturesWithMetadata:t.data,profilePictures:s,savedCocktailsCount:e.data.savedCocktailsCount,username:e.data.username,viewedCocktailsCount:e.data.viewedCocktailsCount})}catch(e){this.setState({username:this.props.user.username,email:this.props.user.email})}})),l(this,"handleSaveProfilePicture",(async()=>{if(this.state.profilePictureToUpload){const t=new FormData;t.append("image",this.state.profilePictureToUpload);try{const e=await ke.post("/profile_pictures/",t);this.setState({activeProfilePicture:e.data.image}),this.toggleShowUploader(),I.NotificationManager.success("Profile picture successfully uploaded","Upload Success",2e3)}catch(e){I.NotificationManager.error("Error uploading profile picture. Please try again or refresh the page","Upload failure",2e3)}}else I.NotificationManager.error("No image selected","Upload failure",2e3)})),l(this,"handleActiveImageUpdate",(e=>async()=>{const t=this.state.profilePicturesWithMetadata.find((t=>t.image===e));if(t)try{await ge.patch(`/profile_pictures/${t.publicId}/`,{isActive:!0}),this.setState({activeProfilePicture:t.image})}catch(a){I.NotificationManager.error("Error updating your active profile picture","Profile picture update error",2e3)}})),l(this,"handleUploadProfilePicture",(e=>{this.setState({profilePictureToUpload:e[0],imageSelected:!0})})),l(this,"toggleShowAllProfilePictures",(()=>{this.setState({showPicturesModal:!this.state.showPicturesModal})})),l(this,"toggleShowUploader",(()=>{this.setState({showUploader:!this.state.showUploader})})),this.state={activeProfilePicture:null,createdCocktailsCount:0,email:"",imageSelected:!1,profilePictures:[],profilePictureToUpload:null,savedCocktailsCount:0,showPicturesModal:!1,showUploader:!1,username:"",viewedCocktailsCount:0}}async componentDidMount(){this.getProfileInfo()}componentDidUpdate(e){e.match.params.username!==this.props.match.params.username&&this.getProfileInfo()}render(){return f("div",{className:"profile-page",children:[f("div",{className:"inner-content",children:[f("div",{className:"profile-image-and-uploader",children:[u("img",{className:"profile-picture",src:this.state.activeProfilePicture||"/assets/cocktail-silhouette.4db10b3e.png",onClick:this.toggleShowAllProfilePictures}),u("div",{className:"upload-icon",onClick:this.toggleShowUploader,children:u(P,{title:"Upload a new profile picture",placement:"top",children:u(W,{})})})]}),f("div",{className:"username",children:[u("h3",{children:"Username:"}),u("div",{children:this.state.username})]}),this.props.user.username===this.props.match.params.username&&f("div",{className:"email",children:[u("h3",{children:"Email:"}),u("div",{children:this.state.email})]}),f("div",{className:"profile-stats",children:[f("div",{className:"stat",children:[u("span",{className:"stat-title",children:"Liked Cocktails: "}),u("span",{children:this.state.savedCocktailsCount})]}),f("div",{className:"stat",children:[u("span",{className:"stat-title",children:"Created Cocktails: "}),u("span",{children:this.state.createdCocktailsCount})]}),f("div",{className:"stat",children:[u("span",{className:"stat-title",children:"Viewed Cocktails: "}),u("span",{children:this.state.viewedCocktailsCount})]})]})]}),u(rt,{buttonText:"Upload a new profile picture",imageSelected:this.state.imageSelected,open:this.state.showUploader,handleClose:this.toggleShowUploader,uploadImage:this.handleUploadProfilePicture,saveImage:this.handleSaveProfilePicture}),this.state.profilePictures&&u(nt,{images:y.uniq(this.state.profilePictures),canUpdate:!0,open:this.state.showPicturesModal,updateText:"Set as active profile picture",handleClose:this.toggleShowAllProfilePictures,handleUpdate:this.handleActiveImageUpdate})]})}}var lt=L((e=>{const{user:t}=e.users;return{user:t}}))(ct);const dt=h({name:"cocktailsByLiquor",initialState:{},reducers:{didGetCocktailsByLiquor(e,t){e[t.payload.liquorId]={cocktails:t.payload.cocktails,nextPage:2}},didUpdateCocktailsByLiquor(e,t){const a=t.payload.liquorId,s=e[a]?[...e[a].cocktails,...t.payload.cocktails]:[...t.payload.cocktails];e[a]={cocktails:s,nextPage:e.page+1}}}}),{didGetCocktailsByLiquor:ht,didUpdateCocktailsByLiquor:pt}=dt.actions;var ut=dt.reducer;class mt extends v.Component{constructor(e){super(e),l(this,"fetchCocktails",(async()=>{const e=this.props.match.params.liquorId,t=this.props.nextPage;try{this.setState({isLoadingMoreCocktails:!0});const a=await ge.get("cocktails/filtered_cocktails/",{params:{liquors_filter:Ie(e),page:t}}),s=1===t?ht:pt;this.props.dispatch(s({liquorId:e,cocktails:a.data.results})),this.updateState(a.data.userCocktailsCount,a.data.platformCocktailsCount)}catch(a){console.log(a)}})),l(this,"updateState",((e,t)=>{const a=this.props.match.params.liquorId,s=this.props.cocktails,i=s[0].liquors.find((e=>e.publicId===a)).name,o=y.filter(s,(e=>e.createdBy)),r=y.filter(s,(e=>!e.createdBy));this.setState({title:i,canLoadMoreUserCocktails:o.length<e,canLoadMorePlatformCocktails:r.length<t,isLoadingMoreCocktails:!1,userCocktails:o,platformCocktails:r})})),l(this,"handleToggle",((e,t)=>{this.setState({showUserCreatedCocktails:1===t})})),this.state={canLoadMoreUserCocktails:!1,canLoadMorePlatformCocktails:!1,isLoadingMoreCocktails:!1,title:"",showUserCreatedCocktails:!1,platformCocktails:[],userCocktails:[]}}componentDidMount(){this.props.cocktails||this.fetchCocktails()}componentDidUpdate(e){e.match.params.liquorId!==this.props.match.params.liquorId&&(this.props.cocktails?this.updateState():this.fetchCocktails())}render(){const e=this.state.showUserCreatedCocktails?this.state.userCocktails:this.state.platformCocktails,t=this.state.showUserCreatedCocktails?this.state.canLoadMoreUserCocktails:this.state.canLoadMorePlatformCocktails;return u("div",{className:"cocktails-by-liquor-display",children:u(He,{canLoadMore:t,isLoading:this.state.isLoadingMoreCocktails,fetchData:this.fetchCocktails,children:u(Ye,{cocktails:e,hasToggle:!0,isToggled:this.state.showUserCreatedCocktails,title:this.state.title,handleToggle:this.handleToggle})})})}}var gt=L(((e,t)=>{const{cocktailsByLiquor:a}=e,s=t.match.params.liquorId;return{cocktails:a[s]?a[s].cocktails:null,nextPage:a[s]?a[s].nextPage:1}}))(mt);const kt=e=>u(C,{className:"loading-screen-modal",open:e.isOpen,children:u(j,{})});class vt extends v.Component{constructor(e){super(e),l(this,"passwordsMatch",(()=>this.state.newPassword===this.state.matchingPassword)),l(this,"handleChange",(e=>{this.setState({[e.target.name]:e.target.value})})),l(this,"submitEmail",(async()=>{if(this.emailIsValid())try{this.setState({isLoading:!0});if(200!==(await ge.post("/password_reset/send_verification_code_email/",{email:this.state.email})).status)throw new Error;this.setState({hasSubmittedEmail:!0})}catch(e){console.log(e)}finally{this.setState({isLoading:!1})}else I.NotificationManager.error("Your entered email address is of an invalid format","Invalid email address",5e3)})),l(this,"submitNewPassword",(async()=>{if(this.passwordsMatch())if(this.state.newPassword.trim().length<8)I.NotificationManager.error("Please make sure your password is at least 8 characters long","Password Invalid",5e3);else try{if(200!==(await ge.post("password_reset/reset_password/",{email:this.state.email,newPassword:this.state.newPassword})).status)throw new Error;I.NotificationManager.success("Password successfully changed!","Password Change Success",3e3),ee.push("/login/")}catch(e){I.NotificationManager.error("Error updating your password. Please try again.","Password Reset Error",5e3)}else I.NotificationManager.error("The entered passwords do not match","Password Invalid",5e3)})),l(this,"submitVerificationCode",(async()=>{if(0!==this.state.verificationCode.trim().length){try{this.setState({isLoading:!0});if(200!==(await ge.post("/password_reset/verify_code/",{email:this.state.email,verificationCode:this.state.verificationCode})).status)throw new Error;this.setState({hasSubmittedVerificationCode:!0})}catch(e){I.NotificationManager.error("Verification code does not match, please check your email and try again.","Verification Code Invalid",5e3)}finally{this.setState({isLoading:!1})}this.setState({hasSubmittedVerificationCode:!0})}else I.NotificationManager.error("Please enter a verification code","Verification Code Error",5e3)})),l(this,"inputBlock",(e=>{const{label:t,name:a,onSubmit:s}=e;return f("div",{children:[u("div",{className:"sub-text",children:{verificationCode:"Please check your email for a verification code.",email:"Please enter your email that you would like use to send a verification code to."}[a]}),u(M,{required:!0,className:this.state.isValidEmail?"invalid":"",label:t,name:a,value:this.state[a],variant:"outlined",onChange:this.handleChange}),u("div",{className:"button-container",children:u(S,{className:"email button",variant:"contained",onClick:s,children:"Submit"})})]})})),l(this,"passwordResetBlock",(()=>f("div",{children:[u("div",{children:u(M,{required:!0,className:this.state.isValidEmail?"invalid":"",label:"Enter New Password",name:"newPassword",type:"password",variant:"outlined",onChange:this.handleChange})}),u("div",{className:"second-password-input",children:u(M,{required:!0,className:this.state.isValidEmail?"invalid":"",label:"Re-enter password to verify",name:"matchingPassword",type:"password",variant:"outlined",onChange:this.handleChange})}),u("div",{className:"button-container",children:u(S,{className:"email button",variant:"contained",onClick:this.submitNewPassword,children:"Submit"})})]}))),l(this,"innerContents",(()=>this.state.hasSubmittedVerificationCode?this.passwordResetBlock():this.state.hasSubmittedEmail?this.inputBlock({label:"Verification Code",name:"verificationCode",onSubmit:this.submitVerificationCode}):this.inputBlock({label:"Email",name:"email",onSubmit:this.submitEmail}))),this.state={email:"",hasSubmittedEmail:!1,hasSubmittedVerificationCode:!1,isLoading:!1,matchingPassword:"",newPassword:"",verificationCode:""}}emailIsValid(){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(this.state.email).toLowerCase())}render(){return f("div",{className:"reset-password-container",children:[u("h2",{children:"Reset Password"}),this.innerContents(),u(kt,{isOpen:this.state.isLoading})]})}}class Ct extends v.Component{constructor(e){super(e)}render(){return f("div",{className:"app-container",children:[f(G,{history:ee,children:[u(ze,{user:this.props.user}),f(Y,{children:[u(H,{exact:!0,path:"/",component:()=>u(Le,{isSignedIn:!!this.props.user})}),u(H,{exact:!0,path:"/login/",children:this.props.user?u(A,{to:"/"}):u(Be,{})}),u(H,{exact:!0,path:"/signup/",children:this.props.user?u(A,{to:"/"}):u(De,{})}),u(H,{exact:!0,path:"/reset-password/",component:vt}),u(H,{exact:!0,path:"/create-cocktail/",component:Ge}),u(H,{exact:!0,path:"/cocktail/:id",component:ot}),u(H,{exact:!0,path:"/cocktail/:id/edit",component:Ge}),u(H,{exact:!0,path:"/cocktails/:liquorId",component:gt}),u(H,{exact:!0,path:"/user/:username",component:lt}),u(H,{exact:!0,path:"/user/:username/saved-cocktails",component:Ke}),u(H,{exact:!0,path:"/user/:username/created-cocktails",component:st}),u(H,{path:"*",children:u(A,{to:"/"})})]})]}),u(I.NotificationContainer,{})]})}}var ft=L((e=>{const{user:t}=e.users;return{user:t}}))(Ct);const St=K({reducer:Z({users:_e,liquors:ce,ingredients:ie,savedCocktails:me,cocktailsByLiquor:ut,createdCocktails:tt})});Q.render(f(X,{store:St,children:[u("div",{children:"hello wrold"}),u(ft,{})]}),document.getElementById("root"));
